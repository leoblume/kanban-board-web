<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Importar e Manter Tarefas</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script type="module" src="./importador_pdf.js"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; padding: 20px; background: #f4f5f7; color: #172b4d; }
    .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 24px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    h1 { font-size: 24px; margin-bottom: 24px; }
    h2 { font-size: 20px; border-bottom: 1px solid #dfe1e6; padding-bottom: 8px; margin-top: 32px; }
    input, button { margin-top: 10px; padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #0052cc; color: white; border-color: #0052cc; cursor: pointer; transition: background-color 0.2s; }
    button:hover { background: #0065ff; }
    button.import { background: #198754; border-color: #198754; }
    button.import:hover { background: #157347; }
    button:disabled { background: #aaa; cursor: not-allowed; border-color: #aaa; }
    #resultArea { background: #f4f5f7; padding: 16px; border-radius: 3px; margin-top: 20px; max-height: 300px; overflow-y: auto; font-family: monospace; white-space: pre-wrap; }
    li { margin: 6px 0; color: #42526e; }
    li.success { color: #006644; }
    li.warning { color: #ff8b00; }
    a { display: inline-block; margin-top: 20px; color: #0052cc; }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html">&larr; Voltar ao Quadro Principal</a>
    
    <h1>Importação e Manutenção de Dados</h1>

    <h2>1. Manutenção de Tarefas Antigas</h2>
    <p>Clique aqui para verificar todas as tarefas existentes e corrigir automaticamente aquelas que não possuem os campos `deliveryDate`, `order` ou o status "Corte". Execute isso uma vez se tarefas antigas não estiverem aparecendo ou exibindo colunas em branco.</p>
    <button onclick="runMigration()" id="migration-button">Executar Manutenção de Dados</button>

    <h2>2. Importar Tarefas via Relatório PDF</h2>
    <p>Selecione o arquivo PDF de relatório para importar ou atualizar as tarefas no quadro Kanban.</p>
    <input type="file" id="pdfFile" accept="application/pdf">
    <button onclick="extractData()" class="import">Importar Dados do PDF</button>
    
    <h3>Log de Resultados:</h3>
    <div id="resultArea">Aguardando ação...</div>
  </div>
</body>
</html>